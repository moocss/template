<!doctype html>
<html>
<head>
<title>Benchmark.js test page | jsPerf</title>
<!-- http://jsperf.com/benchmark-js-test-page -->
<meta charset="utf-8">
<meta name="description" content="This is just a test document for Benchmark.js.">
<link rel="stylesheet" href="main.css">
<script>document.documentElement.className='js'</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body>
<article>
  <hgroup>
    <h1>Benchmark.js test page</h1>
    <h2>JavaScript performance comparison</h2>
  </hgroup>
  <p class="meta">
    Test case created by <a href="http://mathiasbynens.be/">Mathias</a>
    <time datetime="2010-08-02T18:45:23+02:00" pubdate>40 seconds ago</time>
    and last updated <time datetime="2010-08-02T18:45:51+02:00">12 seconds ago</time>
  </p>

  <section>
    <h2>Info</h2>
    <p>
      This is just a test document for Benchmark.js.
    </p>
  </section>

  <section id="prep-code">
    <h2>Preparation code</h2>
    <pre><code>
  var template = new Template();
  var tmpl = '&lt;div&gt;&lt;h1&gt;Team: {country}&lt;/h1&gt;' +
							'{defined:players}Players list:&lt;ul&gt;{repeat:players}' + 
							'&lt;li&gt;Player #{number}: {name}, {position}{not-empty:substitute}. substitute{/not-empty:substitute}' +
							'{defined:palmares}&lt;div class=&quot;palmares&quot;&gt;&lt;h2&gt;Palmares of &quot;{name}&quot;&lt;/h2&gt;&lt;ul&gt;{repeat:palmares}&lt;li&gt;{.}&lt;/li&gt;{/repeat:palmares}&lt;/ul&gt;&lt;/div&gt;{/defined:palmares}&lt;/li&gt;{/repeat:players}{/defined:players}&lt;/div&gt;',
	data = [
				{country: 'Cameroon', players: [{position: 'goalkeeper', number: 1, name: 'The Wall', palmares: ['2008 - 2009: won the fanstastic cup', '2008 - 2009: won the premier league championship']},
				{position: 'attacker', number: 9, name: 'Speedy', palmares: ['2008 - 2009: won the fanstastic cup', '2008 - 2009: won the premier league championship']}, 
				{position: 'middfield', number: 25, name: 'Charly', palmares: ['2008 - 2009: won the super league championship'], substitute: true}]}, 
				{country: 'Argentina', players: [{position: 'middfield', number: 10, name: 'Diego'}, {position: 'attacker', number: 8, name: 'Samuel', substitute: true}, {position: 'goolkeeper', number: 1, name: 'Stone'}]}
			];
			
	tmpl = '{loop:}' + tmpl + '{/loop:}';
	</code></pre>
  </section>

  <section>
    <h2>Preparation code output</h2>
    <p>Foo!</p>
  </section>

  <section id="runner">
    <h2>Test runner</h2>

    <p id="firebug"><strong>Warning! For accurate results, please disable Firebug before running the tests. <a href="http://jsperf.com/faq#firebug-warning">(Why?)</a></strong></p>

    <p id="java"><strong>Java applet disabled.</strong></p>

    <p id="status">
      <noscript>
        <strong>
          To run the tests, please
          <a href="http://enable-javascript.com/">enable JavaScript</a>
          and reload the page.
        </strong>
      </noscript>
    </p>

    <div id="controls">
      <button id="run" type="button"></button>
    </div>

    <table id="test-table">
      <caption>Testing in <span id="user-agent"></span></caption>
      <thead>
      <tr>
        <th colspan="2">Test</th>
        <th title="Operations per second (higher is better)">Ops/sec</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <th scope="row" id="title-1"><div>Old implementation</div></th>
        <td>
        <pre><code>
		template.substitute(tmpl, data)</code></pre>
        </td>
        <td id="results-1" class="results"></td>
      </tr>
      <tr>
        <th scope="row" id="title-2"><div>New implementation</div></th>
        <td>
        <pre><code>
		template.string(tmpl, data)</code></pre>
        </td>
        <td id="results-2" class="results"></td>
      </tr>
      </tbody>
    </table>

    <p>
      You can <a href="#" rel="nofollow">edit these tests or add even more tests to this page</a>
      by appending <code>/edit</code> to the URL.
    </p>
  </section>

  <section>
    <h2 id="results">Compare results of other browsers</h2>
    <div id="bs-results"></div>
  </section>

  <section id="comments">
    <h1>0 comments</h1>
    <div id="comments-wrapper">
      <form action="/benchmark-js-test-page#comment-form" method="post" id="comment-form">
        <fieldset>
          <h2>Add a comment</h2>
          <div>
            <label for="author">Name <em title="This field is required">*</em></label>
            <input type="text" name="author" id="author" required>
          </div>
          <div>
            <label for="author-email">Email <em title="This field is required">*</em></label>
            <label class="inline"><input type="email" name="author-email" id="author-email" required> (only used for Gravatar)</label>
          </div>
          <div>
            <label for="author-url">URL </label>
            <input type="url" name="author-url" id="author-url">
          </div>
          <div>
            <label for="message">Message <em title="This field is required">*</em> <span>Markdown syntax is allowed</span></label>
            <textarea name="message" id="message" required></textarea>
          </div>
          <div class="question">
            <label for="question">Are you a spammer? <span>(just answer the question)</span> </label>
            <input type="text" name="question" id="question">
          </div>
          <div class="buttons">
            <input type="submit" class="submit" value="Add comment">
          </div>
        </fieldset>
      </form>
    </div>
  </section>
</article>

<footer>
  &copy; 2011 <a href="http://jsperf.com/">jsPerf.com</a>
  &middot; <a href="http://jsperf.com/browse">Browse</a>
  &middot; <a href="http://jsperf.com/popular">Popular tests</a>
  &middot; <a href="http://jsperf.com/faq">FAQ</a>
  &middot; <a href="http://jsperf.com/faq#donate">Donate</a>
  &middot; <a href="http://twitter.com/jsprf" rel="nofollow">twitter: @jsprf</a>
  &middot; <a href="http://benchmarkjs.com/">Benchmark.js</a>
  &middot; by <a href="http://mathiasbynens.be/" title="Mathias Bynens, front-end web developer">@mathias</a>
</footer>

<script src="benchmark.js"></script>
<script src="ui.js"></script>
<script src="ui.browserscope.js"></script>
<script src="../../mootools.js"></script>
<script src="../../Source/Template.js"></script>
<script src="template.js"></script>
<script>
  ui.browserscope.key = 'agt1YS1wcm9maWxlcnINCxIEVGVzdBjTlbUIDA';
  ui.browserscope.selector = '#bs-results';

  var template = new Template();
  var tmpl = '<div><h1>Team: {country}</h1>' +
							'{defined:players}Players list:<ul>{repeat:players}' + 
							'<li>Player #{number}: {name}, {position}{not-empty:substitute}. substitute{/not-empty:substitute}' +
							'{defined:palmares}<div class="palmares"><h2>Palmares of "{name}"</h2><ul>{repeat:palmares}<li>{.}</li>{/repeat:palmares}</ul></div>{/defined:palmares}</li>{/repeat:players}{/defined:players}</div>',
	data = [
				{country: 'Cameroon', players: [{position: 'goalkeeper', number: 1, name: 'The Wall', palmares: ['2008 - 2009: won the fanstastic cup', '2008 - 2009: won the premier league championship']},
				{position: 'attacker', number: 9, name: 'Speedy', palmares: ['2008 - 2009: won the fanstastic cup', '2008 - 2009: won the premier league championship']}, 
				{position: 'middfield', number: 25, name: 'Charly', palmares: ['2008 - 2009: won the super league championship'], substitute: true}]}, 
				{country: 'Argentina', players: [{position: 'middfield', number: 10, name: 'Diego'}, {position: 'attacker', number: 8, name: 'Samuel', substitute: true}, {position: 'goolkeeper', number: 1, name: 'Stone'}]}
			];
			
	tmpl = '{loop:}' + tmpl + '{/loop:}';
	
  ui.add('Old implementation', function() {
  
		template.substitute(tmpl, data)
  }).add('New implementation', function() {
   
		template.string(tmpl, data)
  })
  /* 
  .add('Error', function() {
    arr.foo(); // unknown method
  })
  .add('Just another unrelated test', function() {
    var x = arr,
        y = ~~(Math.random() * 100);
    while (y--) {
      if (arr[y]) {
        arr[y];
      } else {
	  
      }
    }
  })
  */;

</script>
</body>
</html>